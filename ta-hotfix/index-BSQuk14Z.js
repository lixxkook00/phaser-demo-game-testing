var t=Object.defineProperty,e=(e,s,i)=>((e,s,i)=>s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[s]=i)(e,"symbol"!=typeof s?s+"":s,i);import{a as s}from"./vendor-DtCq3ivu.js";import"./index-BSQuk14Z.js";!function(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))e(t);new MutationObserver((t=>{for(const s of t)if("childList"===s.type)for(const t of s.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&e(t)})).observe(document,{childList:!0,subtree:!0})}function e(t){if(t.ep)return;t.ep=!0;const e=function(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();const i={},a=function(t,e,s){let a=Promise.resolve();if(e&&e.length>0){const t=document.getElementsByTagName("link"),n=document.querySelector("meta[property=csp-nonce]"),r=(null==n?void 0:n.nonce)||(null==n?void 0:n.getAttribute("nonce"));a=Promise.all(e.map((e=>{if(e=function(t,e){return new URL(t,e).href}(e,s),e in i)return;i[e]=!0;const a=e.endsWith(".css"),n=a?'[rel="stylesheet"]':"";if(!!s)for(let s=t.length-1;s>=0;s--){const i=t[s];if(i.href===e&&(!a||"stylesheet"===i.rel))return}else if(document.querySelector(`link[href="${e}"]${n}`))return;const o=document.createElement("link");return o.rel=a?"stylesheet":"modulepreload",a||(o.as="script",o.crossOrigin=""),o.href=e,r&&o.setAttribute("nonce",r),document.head.appendChild(o),a?new Promise(((t,s)=>{o.addEventListener("load",t),o.addEventListener("error",(()=>s(new Error(`Unable to preload CSS for ${e}`))))})):void 0})))}return a.then((()=>t())).catch((t=>{const e=new Event("vite:preloadError",{cancelable:!0});if(e.payload=t,window.dispatchEvent(e),!e.defaultPrevented)throw t}))};var n=(t=>(t[t.custom=0]="custom",t[t.once=1]="once",t[t.first=2]="first",t[t.ping=3]="ping",t))(n||{});const r=new class{constructor(t){e(this,"entries",{}),e(this,"pingTime",0),this.type=t}init(){this.setPingTime(),this.send(o.IMPRESSION,"once")}setPingTime(){this.pingTime=setInterval((()=>this.send(o.PING_2,"ping")),2e3)}clearPingTime(){clearInterval(this.pingTime)}setExisting(t){return this.entries[t]=!0,this}exists(t){return this.entries[t]}send(t,e="first"){let s=t;switch(n[e]){case 1:if(this.exists(t))return;this.setExisting(t);break;case 2:this.exists(t)||(s="F"+s,this.setExisting(t))}switch(this.type){case"aa":AAEvents.event(s);break;case"studio":{const t=Enabler.getParameter("app")??"",e=Enabler.getParameter("device")??"";Enabler.reportCustomVariableCount1(`${s.substring(0,35)}|${t.substring(0,60)}|${e.substring(0,1)}`);break}case"ga":gtag("event","select_content",{content_type:s}),console.log("select_content",{content_type:s});break;default:console.error(`Unsupported type "${this.type}".`)}}click(t){switch(this.send(t,"first"),this.type){case"aa":AAEvents.click();break;case"studio":Enabler.exit("CTA");break;default:console.warn(`Call to Action is unsupported for this type: "${this.type}".`)}}trackVideoQuartiles(t,e=o.VIDEO_PROGRESS){const s=()=>{const s=t.currentTime/t.duration||0;switch(!0){case s>=.75:this.send(`${e}75`,"once");break;case s>=.5:this.send(`${e}50`,"once");break;case s>=.25:this.send(`${e}25`,"once")}};t.addEventListener("timeupdate",s.bind(this)),t.addEventListener("ended",(()=>{this.send(`${e}100`,"once"),t.removeEventListener("timeupdate",s.bind(this))}),{once:!0})}getUrl(t){return t}}("ga"),o={IMPRESSION:"TA_General_Impression",PING_2:"TA_General_Ping2s",START:"ENG_General_Start",ACTIVE:"ENG_General_ActivePlay",COMPLETE:"ENG_General_Complete",REPLAY:"ENG_General_Replay",CTA:"CTA_General_DiscoverMore",VIDEO_PROGRESS:"Video_General_Played",VIDEO_PLAY:"Video_General_Replay",VIDEO_MUTE:"Video_General_Mute",VIDEO_UNMUTE:"Video_General_Unmute",MUTE:"Audio_SFX_Mute",UNMUTE:"Audio_SFX_Unmute",DOWNLOAD_IOS:"ENG_General_DownloadIos",DOWNLOAD_ANDROID:"ENG_General_DownloadAndroid"},h=async()=>{await a((async()=>{const{Howler:t}=await import("./vendor-DtCq3ivu.js").then((t=>t.h));return{Howler:t}}),[],import.meta.url).then((({Howler:t})=>{window.addEventListener("blur",(()=>{var e;return null==(e=null==t?void 0:t.ctx)?void 0:e.suspend()})),window.addEventListener("focus",(()=>setTimeout((()=>{var e;return null==(e=null==t?void 0:t.ctx)?void 0:e.resume()}),500)))})),await a((async()=>{const{createGame:t}=await Promise.resolve().then((()=>J));return{createGame:t}}),void 0,import.meta.url).then((({createGame:t})=>{r.init(),window.Game instanceof Phaser.Game||(window.Game=t())}))};a((()=>import("./vendor-DtCq3ivu.js").then((t=>t.p))),[],import.meta.url).then(h);var l="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function d(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}const u=682,c=1024,g=341,p=512;var m=(t=>(t.BOOT="Boot",t.PRELOADER="Preloader",t.MENU="Menu",t.PLAY="Play",t.END="End",t.UI="UI",t))(m||{});class y extends Phaser.Scene{constructor(){super(...arguments),e(this,"score",0),e(this,"debugBounds",new Phaser.Structs.List(this))}get maxWidth(){return 768}get offset(){return(this.maxWidth-Number(this.game.config.width))/2}boot(){this.onresize(),window.addEventListener("resize",this.onresize.bind(this)),window.addEventListener("orientationchange",this.onresize.bind(this)),this.events.on(Phaser.Scenes.Events.SHUTDOWN,this.shutdown,this)}onresize(){const t=Number(this.game.config.width);Object.assign(this.scale.canvas.style,{width:`${Math.min(t,innerWidth)}px`,height:`${innerHeight}px`}),Object.assign(this.game.domContainer.style,{top:0}),t>innerWidth?this.scale.setGameSize(t,t/innerWidth*innerHeight):this.scale.setGameSize(t,innerHeight)}drawDebug(t,e=this.debugBounds){t.forEach(((t,s)=>{var i;const a=e.getAt(s);if(t instanceof Phaser.GameObjects.Container){let i=e.getAt(s);i||(i=new Phaser.Structs.List(e),e.addAt(i,s)),this.drawDebug(t.list,i)}else if(t instanceof Phaser.GameObjects.Image||t instanceof Phaser.GameObjects.Text||t instanceof Phaser.GameObjects.Shape||t instanceof Phaser.GameObjects.NineSlice){let n=e.getAt(s);a||(n=this.add.graphics(),e.addAt(n,s));const{x:r,y:o,width:h,height:l}=t.getBounds();n.clear().lineStyle(1,65280).strokeRect(r,o,h,l).setAlpha(Math.min(t.alpha,null==(i=t.parentContainer)?void 0:i.alpha)).setVisible(t.visible)}}))}shutdown(){window.removeEventListener("resize",this.onresize.bind(this)),window.removeEventListener("orientationchange",this.onresize.bind(this)),this.events.off(Phaser.Scenes.Events.SHUTDOWN,this.shutdown,this)}}class v extends Phaser.GameObjects.Container{constructor(t,e,s){super(t,e,s),t.add.existing(this)}createElement(t,e={}){const s=document.createElement(t);return Object.assign(s.style,{position:"absolute",pointerEvents:"none",...e}),s}updateInteractive(t){t.updateSize();const{width:e,height:s,originX:i,originY:a}=t;!t.input&&e&&s&&(t.x-=e/2*(1-i),t.y-=s/2*(1-a),t.setInteractive())}}class P extends v{constructor(t,s,i,a,n,o,h="video/mp4"){super(t,s,i),e(this,"dom"),e(this,"video",this.createElement("video",{width:"100%",height:"100%"})),e(this,"videoFrame",this.createElement("div",{width:"100%",height:"100%"})),e(this,"playButton"),e(this,"soundButton"),this.scene=t,this.frameWidth=a,this.frameHeight=n,t.add.existing(this),this.setSize(a,n);const l=document.createElement("source");l.src=r.getUrl(o),l.type=h,this.video.volume=.4,this.video.preload="metadata",this.video.muted=!0,this.video.autoplay=!0,this.video.playsInline=!0,this.video.setAttribute("webkit-playsinline",""),this.video.append(l);const d=`width: ${a}px; height: ${n}px; overflow: hidden`;this.dom=t.add.dom(0,0,"div",d),this.dom.node.append(this.video,this.videoFrame),this.dom.pointerEvents="none",this.soundButton=t.add.dom(0,0,this.createElement("div")),this.playButton=t.add.dom(0,0,this.createElement("div")),this.add([this.dom,this.soundButton,this.playButton]),this.pause(),this.muted=!0}get isPlaying(){return!!(this.video.currentTime>0&&!this.video.paused&&!this.video.ended&&this.video.readyState>2)}get duration(){return this.video.duration}get muted(){return this.video.muted}set muted(t){this.video.muted=t,this.emit("mute")}get currentTime(){return this.video.currentTime}set currentTime(t){this.video.currentTime=t}load(t=!1){return this.video.load(),t&&this.pause(),this}pause(){return this.video.pause(),this}play(){return this.isPlaying||this.video.play(),this}replay(){return this.currentTime=0,this.play()}setMute(t){return this.muted=t,this}setBorderFrame(t,e=0,s="0",i=!1){const a=document.createElement("img");return a.src=t,a.draggable=!1,Object.assign(this.video.style,{width:`calc(100% - ${2*e}px)`,height:`calc(100% - ${2*e}px)`,padding:`${e}px`,zIndex:i?"1":"auto"}),Object.assign(this.dom.node.style,{borderRadius:s}),this.videoFrame.append(a),this}setSoundButton(t,e,s=0,i=0,a=(()=>{})){const n=document.createElement("img");n.src=t,n.draggable=!1;const r=document.createElement("img");return r.src=e,r.draggable=!1,n.style.display=this.muted?"none":"block",r.style.display=this.muted?"block":"none",this.soundButton.node.append(n,r),this.soundButton.setOrigin(0).setPosition(this.frameWidth/2-s,i-this.frameHeight/2).on(Phaser.Input.Events.POINTER_UP,(()=>{this.muted=!this.muted,a(this.muted)})),this.on("mute",(()=>{n.style.display=this.muted?"none":"block",r.style.display=this.muted?"block":"none"})),this}setPlayButton(t,e=(()=>{})){const s=document.createElement("img");return s.src=t,s.draggable=!1,this.playButton.node.append(s),this.playButton.setOrigin(0).on(Phaser.Input.Events.POINTER_UP,(()=>{this.play(),e()})),this.video.addEventListener("ended",(()=>this.showPlayButton())),this.video.addEventListener("pause",(()=>this.showPlayButton())),this.video.addEventListener("play",(()=>this.hidePlayButton())),window.addEventListener("blur",(()=>this.pause())),this}showPlayButton(){return this.scene.tweens.killTweensOf(this.playButton),this.scene.add.tween({targets:this.playButton,alpha:{from:0,to:1},duration:250}),this}hidePlayButton(){return this.scene.tweens.killTweensOf(this.playButton),this.scene.add.tween({targets:this.playButton,alpha:{from:1,to:0},duration:250}),this}preUpdate(){this.updateInteractive(this.playButton),this.updateInteractive(this.soundButton)}}class E extends Phaser.GameObjects.Text{constructor(t){super(t,0,0,"",{}),this.setOrigin(.5)}spawn(t,e,s=!0,i=500){this.setPosition(t,e).setActive(!0).setVisible(!0);const a={targets:this,alpha:0,y:e-40,delay:.2*i,duration:.4*i,ease:Phaser.Math.Easing.Quadratic.In},n=[{targets:this,scale:.8,alpha:1,y:e-20,duration:.4*i,ease:Phaser.Math.Easing.Back.Out}];return s&&n.push(a),this.scene.tweens.chain({targets:this,tweens:n,onComplete:()=>s&&this.setActive(!1).setVisible(!1)}),this}}class f extends Phaser.GameObjects.Group{constructor(t,e="",s={},i=10){super(t,{classType:E,maxSize:i}),this.defaultText=e,this.defaultStyle=s}spawn(t,e,s=!0,i=500,a=this.defaultText,n=this.defaultStyle){const r=this.get();return r.setText(a).setStyle(n).spawn(t,e,s,i),r}}var w=(t=>(t[t.NONE=0]="NONE",t[t.COLOR=1]="COLOR",t[t.IMAGE=2]="IMAGE",t[t.GRADIENT=3]="GRADIENT",t))(w||{});class b extends Phaser.GameObjects.Container{constructor(t,s,i){super(t,s,i),e(this,"valueNow",0),e(this,"valueMax",1),e(this,"tween"),e(this,"background"),t.add.existing(this),this.tween=this.scene.tweens.addCounter({paused:!0}),this.background=t.add.image(0,0,"").setVisible(!1),this.add(this.background)}get progress(){return this.valueNow/this.valueMax}updateTo(t,e=this.valueMax,s=500){this.valueMax=e,this.tween.isPlaying()?(this.tween.updateTo("value",t),this.tween.duration=s):this.reset(t)}pause(){return this.tween.pause(),this}resume(){return this.tween.resume(),this}reset(t=this.valueMax){return this.tween.destroy(),this.tween=this.scene.tweens.addCounter({from:this.valueNow,to:Math.min(t,this.valueMax),duration:500,ease:Phaser.Math.Easing.Cubic.InOut,onUpdate:t=>{this.valueNow=t.getValue(),this.onUpdate(t.getValue())},onComplete:()=>{1===this.progress&&this.emit("complete")}}),this}setBackground(t,e,s,i){return this.background.setVisible(!0).setPosition(t,e).setTexture(s,i),this}}class O extends b{constructor(t,s,i){super(t,s,i),e(this,"style"),e(this,"graphics"),e(this,"image"),e(this,"text"),e(this,"state",w.NONE),t.add.existing(this),this.style={width:0,height:0,px:0,py:0,stroke:0,fill:65280},this.graphics=t.add.graphics(),this.image=t.add.image(0,0,"").setVisible(!1),this.text=t.add.text(0,0,"").setVisible(!1).setOrigin(.5),this.add([this.graphics,this.image,this.text])}get renderer(){return this.state===w.COLOR?this.graphics:this.state===w.IMAGE?this.image:void 0}setColor(t,e,s=0,i=0,a=65280,n=0){return this.state!==w.NONE&&this.state!==w.COLOR||(this.state=w.COLOR,Object.assign(this.style,{width:t,height:e,px:s,py:i,stroke:n,fill:a})),this}setImage(t,e){if(this.state===w.NONE||this.state===w.IMAGE){this.state=w.IMAGE,this.image.setVisible(!0).setTexture(t,e);const s=this.graphics.createGeometryMask();this.image.setMask(s)}else console.error("Cannot change this instance render type");return this}setText(t,e){return this.text.setVisible(!0).setText(t),e&&this.text.setStyle(e),this}onUpdate(){this.graphics.clear();const{width:t,height:e,px:s,py:i,stroke:a,fill:n}=this.style;switch(this.state){case w.COLOR:{this.graphics.fillStyle(a),this.graphics.fillRoundedRect(-t/2,-e/2,t,e,3);const r=-t/2+s,o=-e/2+i,h=t-2*s,l=e-2*i;this.graphics.fillStyle(16777215).fillRoundedRect(r,o,h,l,3),this.graphics.fillStyle(n).fillRoundedRect(r,o,h*this.progress,l,3);break}case w.IMAGE:if(this.image){const t=this.image.getBounds();this.graphics.clear(),this.graphics.fillStyle(0,0),this.graphics.fillRect(t.x,t.y,t.width*this.progress,t.height)}}}}class _ extends b{constructor(t,s,i,a){super(t,s,i),e(this,"slice"),e(this,"text"),e(this,"maxWidth",0),t.add.existing(this),this.maxWidth=a.maxWidth??0,this.slice=t.add.nineslice(-this.maxWidth/2,0,a.key,a.frame,0,a.height,a.leftWidth,a.rightWidth).setOrigin(0,.5),this.text=t.add.text(0,0,"").setVisible(!1).setOrigin(.5),this.add([this.slice,this.text])}onUpdate(){this.slice.setSize(this.maxWidth*this.progress,this.slice.height)}setText(t,e){return this.text.setVisible(!0).setText(t),e&&this.text.setStyle(e),this}}class x extends b{constructor(t,s,i,a,n){super(t,s,i),e(this,"renderer"),t.add.existing(this),this.renderer=t.add.text(0,0,`${a}`,n).setOrigin(.5),this.add(this.renderer)}onUpdate(){this.renderer.setText(Math.floor(this.valueNow).toString())}}class I extends Phaser.GameObjects.Container{constructor(t,s,i,a,n){super(t,s,i),e(this,"_duration"),e(this,"tween"),e(this,"background"),e(this,"renderer"),t.add.existing(this),this._duration=a,this.tween=t.tweens.addCounter({paused:!0}),this.reset(a),this.background=t.add.image(0,0,"").setVisible(!1),this.renderer=this.scene.add.text(0,0,`${a}`,n).setOrigin(.5),this.add([this.background,this.renderer])}get duration(){return this._duration}set duration(t){this._duration=t}get progress(){return this.tween.progress}get remainTime(){return this._duration*(1-this.progress)}get isPlaying(){return this.tween.isPlaying()}start(t=this.duration){this.isPlaying||(this.reset(t),this.resume())}reset(t=this.duration){return this.tween.destroy(),this.tween=this.scene.tweens.addCounter({from:t,to:0,duration:1e3*t,onUpdate:t=>{this.renderer.setText(`${Math.ceil(t.getValue())}`)},onComplete:()=>{1===this.progress&&this.emit("complete")},paused:!0}),this}resume(){return this.tween.resume(),this}pause(){return this.tween.pause(),this}setBackground(t,e,s,i){return this.background.setVisible(!0).setPosition(t,e).setTexture(s,i),this}}Phaser.GameObjects.Container;class M extends Phaser.GameObjects.Container{constructor(t,s,i,a=0){super(t),e(this,"_isIntersectingOnce",!1),e(this,"videoList",new Phaser.Structs.List(this)),this.filmstrip=s,this.visibleY=a,t.add.existing(this),this.setSize(s.width,i),this.create()}create(){this.emit("create")}get activeChildren(){return this.list.filter((t=>t.active&&!this.scene.tweens.isTweening(t)))}get make(){const t=this;return{image(e,s,i,a){const n=t.scene.add.image(e,s,i,a);return t.add(n),n},text(e,s,i,a){const n=t.scene.add.text(e,s,i,a);return t.add(n),n},container(e,s){const i=t.scene.add.container(e,s);return t.add(i),i},graphics(){const e=t.scene.add.graphics();return t.add(e),e},nineslice(e,s,i,a,n,r,o,h,l,d){const u=t.scene.add.nineslice(e,s,i,a,n,r,o,h,l,d);return t.add(u),u},video(e,s,i,a,n){const r=new P(t.scene,e,s,i,a,n);return t.add(r),t.videoList.add(r),r}}}get isIntersecting(){return this.intersect(this)}get isIntersectingOnce(){return this._isIntersectingOnce||(this._isIntersectingOnce=this.isIntersecting),this._isIntersectingOnce}intersect(t,e=.5){if(t instanceof Phaser.GameObjects.Graphics)return!1;const s=t instanceof M,i=t.getBounds(),a=i.height>0?i.top:t.y-t.height*(1-t.originY)+(s?0:this.filmstrip.y+this.y),n=i.height>0?i.bottom:a+t.height,r=a>0?this.scene.scale.height-a:n,o=r>=Math.min(t.height*e,this.scene.scale.height*e)&&r<=this.scene.scale.height+t.height*e;return o&&t.emit("intersect"),o}update(){this.setActive(this.isIntersecting),this.videoList.each((t=>{this.scene.tweens.isTweening(t)||(this.intersect(t)?t.isPlaying||t.active||t.setActive(!0).play():t.setActive(!1).pause())})),this.activeChildren.forEach((t=>this.intersect(t)))}}class S extends Phaser.Events.EventEmitter{constructor(t){super(),this.on("change",t)}emit(t,e,s,i){return super.emit(t,e,s,i)}on(t,e,s){return super.on(t,e,s)}}const T=(t,e,s,i=(()=>{}),a)=>{let n=0;const r=new S(i),o=(t=!1)=>{const e=n;t?(0===n&&(n=s),n--):n=(n+1)%s,r.emit("change",e,n,t)};r.on("change",i.bind(t.parentContainer));const h=()=>o(!0),l=()=>o();return t.removeAllListeners().setInteractive().on(Phaser.Input.Events.POINTER_DOWN,h),e.removeAllListeners().setInteractive().on(Phaser.Input.Events.POINTER_DOWN,l),[()=>n,r,h,l]},k=(t,e)=>{Array.isArray(t)?t.forEach(e):e(t)},A=async(t,e)=>{const s=await fetch(t),i=await s.blob(),a=URL.createObjectURL(i),n=document.createElement("a");n.href=a,e&&(n.download=e),document.body.appendChild(n),n.click(),document.body.removeChild(n)},C={preload:!0,onplayerror:(t,e)=>console.error("Can't play an audio file: "+e),onloaderror:(t,e)=>console.error("Error while loading an audio file: "+e)};class B{constructor(t,s,i=!1,a=1){e(this,"_id",null),e(this,"_howl"),e(this,"_volume",.4),e(this,"_loop",!1),e(this,"_rate",1),e(this,"_oncePlay",new Phaser.Structs.List(this)),e(this,"_onPlay",new Phaser.Structs.List(this)),this._howl=t,this.volume=s,this.loop=i,this.rate=a}get id(){return this._id}get howl(){return this._howl}get isLoaded(){return"loaded"===this._howl.state()}get isPlaying(){return null===this._id||this._howl.playing(this._id)||!this.isLoaded}play(t){if(this.isLoaded){const e=t??this._id,s=this._howl.play(e??"__default");this._id=s,this._howl.volume(this.volume,s).loop(this.loop,s).rate(this.rate),this._oncePlay.each((t=>t(s))),this._onPlay.each((t=>{this.on("play",t),t(s)})),this._oncePlay.removeAll()}else this._howl.once("load",(()=>this.play(t)));return this}get isPaused(){return!this.isPlaying}pause(){return null!==this._id&&this._howl.pause(this._id),this}get isStopped(){return this.isPaused&&0===this.seek()}stop(){return null!==this._id&&this._howl.stop(this._id),this}get rate(){return this._rate}set rate(t){null!==this._id&&(this._rate=Phaser.Math.Clamp(t,.5,4),this._howl.rate(this._rate,this._id))}setRate(t){return this._rate=t,this}get loop(){return this._loop}set loop(t){null!==this._id&&(this._loop=t,this._howl.loop(this._loop,this._id))}setLoop(t){return this.loop=t,this}get volume(){return null===this._id?this._volume:this._howl.volume(this._id)}set volume(t){this._volume=Phaser.Math.Clamp(t,0,1),null!==this._id&&this._howl.volume(this._volume,this._id)}setVolume(t=this._volume){return this.volume=t,this}get muted(){return null!=this._id&&this._howl.mute()}set muted(t){null!==this._id&&this._howl.mute(t,this._id)}setMute(t){return this.muted=t,this}seek(t){return void 0===t?null===this._id?0:this._howl.seek(this._id):(null!==this._id&&this._howl.seek(t,this._id),this)}get position(){return null===this._id?[0,0,0]:this._howl.pos()}setPosition(t,e,s){return null!==this._id&&this._howl.pos(t,e,s,this._id),this}fade(t,e,s=500){return null!==this._id&&this._howl.fade(Phaser.Math.Clamp(t,0,1),Phaser.Math.Clamp(e,0,1),s,this._id),this}on(t,e){return"play"===t?null===this._id?this._onPlay.add(e):this._howl.on(t,e,this._id):null===this._id?this.once("play",(()=>this.on(t,e))):this._howl.on(t,e,this._id),this}once(t,e){return"play"===t?null===this._id?this._oncePlay.add(e):this.isPlaying?e(this._id):this._howl.once(t,e,this._id):null===this._id?this.once("play",(()=>this.once(t,e))):this._howl.once(t,e,this._id),this}off(t,e){return null!==this._id&&this._howl.off(t,e,this._id),this}}class R{constructor(){e(this,"_muted",!1),e(this,"_volume",.4),e(this,"playlist",new Phaser.Structs.Map([]))}get volume(){return this._volume}set volume(t){this._volume=Phaser.Math.Clamp(t,0,1),s.Howler.volume(this._volume)}get muted(){return this._muted}set muted(t){this._muted=!!t,s.Howler.volume(t?0:this.volume)}setGlobalVolume(t){this.volume=t}setMute(t){this.muted=t}createSound(t,e){const i=new s.Howl({...C,...e,src:[r.getUrl(`${t}.mp3`)]});return new B(i,(null==e?void 0:e.volume)??this.volume,null==e?void 0:e.loop,null==e?void 0:e.rate)}add(t,e){const s=this.createSound(t,e);return this.playlist.set(t,s),s}getAudio(t){return this.playlist.get(t)}play(t,e){const s=this.getAudio(t);if(s)return s.isPlaying&&s.stop(),s.setLoop(!!(null==e?void 0:e.loop)).setVolume((null==e?void 0:e.volume)??this.volume),(null==e?void 0:e.sprite)?s.play(e.sprite):s.play(),s}pause(t){const e=this.getAudio(t);if(e)return e.pause(),e}stop(t){const e=this.getAudio(t);if(e)return e.stop(),e}stopAll(){return this.playlist.each(((t,e)=>!!e.stop())),this}fadeIn(t,e=500,s){const i=this.getAudio(t);if(!i)return;const a=(null==s?void 0:s.volume)??this.volume;return i.stop().setVolume(a).setLoop(!!(null==s?void 0:s.loop)),(null==s?void 0:s.sprite)?i.play(s.sprite):i.play(),i.fade(0,a,e),i}fadeOut(t,e=500){const s=this.getAudio(t);if(s)return s.fade(s.volume,0,e),setTimeout((()=>s.stop()),e),s}}const N=t=>{if(!t)return null;const e=Array.isArray(t)?t[0].scene:t.scene;return e.tweens.killTweensOf(t),e.tweens},L=t=>{const e=N(t.targets);return e?e.add(t):e},D=t=>{const e=N(t.targets);return e?e.chain(t):e},U=(t,e)=>{const s=N(t);return s?s.addCounter(e):s};class G{static MoveTo(t,e,s,i={}){return L({duration:500,ease:Phaser.Math.Easing.Quadratic.Out,...i,targets:t,x:e,y:s})}static MoveBy(t,e,s,i={}){return L({duration:500,ease:Phaser.Math.Easing.Quadratic.Out,...i,targets:t,x:`+=${e}`,y:`+=${s}`})}static FlyIn(t,e,s,i={}){return k(t,(t=>t.setPosition(t.x-e,t.y-s))),L({duration:500,ease:Phaser.Math.Easing.Back.Out,...i,targets:t,x:`+=${e}`,y:`+=${s}`})}static FloatIn(t,e,s,i={}){return k(t,(t=>t.setPosition(t.x-e,t.y-s).setAlpha(0))),L({duration:500,alpha:1,ease:Phaser.Math.Easing.Quadratic.InOut,...i,targets:t,x:`+=${e}`,y:`+=${s}`})}static ZoomIn(t,e={}){return L({scale:1,duration:500,ease:Phaser.Math.Easing.Back.Out,...e,targets:t})}static ZoomOut(t,e={}){return L({duration:500,scale:0,ease:Phaser.Math.Easing.Back.In,...e,targets:t})}static ZoomInAndOut(t,e=0,s=500,i={}){return D({...i,targets:t,tweens:[{targets:t,scale:{value:1,ease:Phaser.Math.Easing.Back.Out},duration:.5*s},{targets:t,scale:{value:0,ease:Phaser.Math.Easing.Back.In},duration:.5*s,delay:e}]})}static ZoomPulse(t,e=1,s={}){return D({targets:t,tweens:[{...s,targets:t,scale:{value:e,duration:500,ease:Phaser.Math.Easing.Back.Out}},{targets:t,scale:{value:{from:e,to:.95*e},duration:500,ease:Phaser.Math.Easing.Quadratic.In,repeat:-1,repeatRelay:1e3,yoyo:!0}}]})}static ZoomBeat(t,e=1,s={}){return D({targets:t,tweens:[{...s,targets:t,scale:{value:e,duration:500,ease:Phaser.Math.Easing.Back.Out}},{targets:t,scale:{value:{from:e,to:.95*e},duration:500,ease:Phaser.Math.Easing.Back.In,repeat:-1,repeatRelay:1e3,yoyo:!0}}]})}static ZoomIdle(t,e,s,i=1,a={}){return D({targets:t,tweens:[{...a,targets:t,scale:{value:i,duration:500,ease:Phaser.Math.Easing.Back.Out}},{duration:500,targets:t,x:{value:`+=${e}`,repeat:-1,ease:Phaser.Math.Easing.Quadratic.InOut,yoyo:!0},y:{value:`+=${s}`,repeat:-1,ease:Phaser.Math.Easing.Quadratic.InOut,yoyo:!0}}]})}static BackIn(t,e,s,i=0,a={}){return k(t,(t=>{t.setPosition(t.x-e,t.y-s).setAlpha(i).setScale(.7)})),D({...a,targets:t,tweens:[{targets:t,x:`+=${e}`,y:`+=${s}`,alpha:.7,duration:.5*(a.duration??1e3),ease:Phaser.Math.Easing.Back.Out},{targets:t,alpha:1,scale:1,duration:.5*(a.duration??1e3),ease:Phaser.Math.Easing.Back.Out}]})}static BackOut(t,e,s,i={}){return D({...i,targets:t,tweens:[{targets:t,alpha:.7,scale:.7,duration:.5*(i.duration??1e3),ease:Phaser.Math.Easing.Back.In},{targets:t,x:`+=${e}`,y:`+=${s}`,alpha:0,duration:.5*(i.duration??1e3),ease:Phaser.Math.Easing.Back.In}]})}static TintTo(t,e,s,i,a={}){const n=Phaser.Display.Color.IntegerToColor(t.tintTopLeft);return U(t,{duration:500,ease:Phaser.Math.Easing.Quadratic.Out,...a,from:0,to:1,onUpdate:a=>{const r=Phaser.Display.Color.Interpolate.ColorWithRGB(n,e,s,i,1,a.getValue());t.setTint(Phaser.Display.Color.GetColor(r.r,r.g,r.b))}})}static TintBy(t,e,s,i,a={}){const n=Phaser.Display.Color.IntegerToColor(t.tintTopLeft);return U(t,{duration:500,ease:Phaser.Math.Easing.Quadratic.Out,...a,from:0,to:1,onUpdate:a=>{const r=new Phaser.Display.Color(n.red-e,n.green-s,n.blue-i),o=Phaser.Display.Color.Interpolate.ColorWithColor(n,r,1,a.getValue());t.setTint(Phaser.Display.Color.GetColor(o.r,o.g,o.b))}})}static Bounce(t,e=1,s=1e3,i={}){return D({...i,targets:t,tweens:[{targets:t,delay:.2*s,y:"-="+30*e,scaleY:1.1*e,duration:.2*s},{targets:t,y:"+="+30*e,scaleY:e,duration:.13*s},{targets:t,y:"-="+15*e,scaleY:1.05*e,duration:.17*s},{targets:t,y:"+="+15*e,scaleY:.95*e,duration:.1*s},{targets:t,y:"-="+.1333*e,scaleY:1.02*e,duration:.1*s,yoyo:!0}]})}static BounceIdle(t,e,s,i={}){return L({duration:500,...i,targets:t,x:`+=${e}`,y:`+=${s}`,scaleY:.95,ease:Phaser.Math.Easing.Quadratic.In,repeat:-1,yoyo:!0})}static Flash(t,e={}){return L({duration:250,repeat:-1,...e,targets:t,alpha:{value:e.alpha??0,yoyo:!0,ease:Phaser.Math.Easing.Quadratic.InOut}})}static Blink(t,e={}){return L({duration:500,repeat:-1,repeatDelay:500,...e,targets:t,alpha:{value:e.alpha??0,yoyo:!0,ease:Phaser.Math.Easing.Quadratic.In}})}static Pulse(t,e=1,s={}){return L({duration:500,repeat:-1,...s,targets:t,scale:{value:.95*e,yoyo:!0,ease:Phaser.Math.Easing.Quadratic.In}})}static RubberBand(t,e=1,s=1e3,i={}){return D({...i,targets:t,tweens:[{targets:t,scaleX:1.25*e,scaleY:.75*e,duration:.3*s,ease:Phaser.Math.Easing.Quadratic.Out},{targets:t,scaleX:.75*e,scaleY:1.25*e,duration:.1*s,ease:Phaser.Math.Easing.Quadratic.In},{targets:t,scaleX:1.15*e,scaleY:.85*e,duration:.1*s},{targets:t,scaleX:.95*e,scaleY:1.05*e,duration:.15*s},{targets:t,scaleX:1.05*e,scaleY:.95*e,duration:.1*s},{targets:t,scaleX:e,scaleY:e,duration:.25*s}]})}static Shake(t,e,s,i=1e3,a={}){const n={targets:t,x:`-=${e}`,y:`-=${s}`,duration:.1*i},r={targets:t,x:`+=${e}`,y:`+=${s}`,duration:.1*i};return D({...a,targets:t,tweens:[n,r,n,r,n,r,n,r,n,r]})}static Swing(t,e=1,s=1e3,i={}){return k(t,(t=>{var e,s;return null==(s=null==(e=t.setPosition(t.x,t.y-(t.height?.5*t.height:0)))?void 0:e.setOrigin)?void 0:s.call(e,.5,0)})),D({repeat:-1,...i,targets:t,tweens:[{targets:t,angle:15*e,duration:.2*s},{targets:t,angle:10*-e,duration:.2*s},{targets:t,angle:5*e,duration:.2*s},{targets:t,angle:5*-e,duration:.2*s},{targets:t,angle:0,duration:.2*s}]})}static Tada(t,e=1,s=700,i={}){const a=Phaser.Math.Easing.Quadratic.Out,n={targets:t,scale:1.1*e,angle:5*e,duration:.2*s,ease:a},r={targets:t,scale:1.1*e,angle:5*-e,duration:.1*s,ease:a};return D({...i,targets:t,tweens:[{targets:t,scale:.9*e,angle:5*-e,duration:.1*s,ease:a},n,r,n,r,n,{targets:t,scale:e,angle:0,duration:.1*s,ease:a}]})}static Wobble(t,e=1,s=1e3,i={}){const a=Phaser.Math.Easing.Quadratic.Out;return D({...i,targets:t,tweens:[{targets:t,x:`-=${25*e}%`,angle:-5*Math.sqrt(e),duration:.15*s,ease:a},{targets:t,x:`+=${45*e}%`,angle:3*Math.sqrt(e),duration:.15*s,ease:a},{targets:t,x:`-=${35*e}%`,angle:-3*Math.sqrt(e),duration:.15*s,ease:a},{targets:t,x:`+=${25*e}%`,angle:2*Math.sqrt(e),duration:.15*s,ease:a},{targets:t,x:`-=${15*e}%`,angle:-1*Math.sqrt(e),duration:.15*s,ease:a},{targets:t,x:`+=${5*e}%`,angle:0,duration:.25*s,ease:a}]})}static Heartbeat(t,e=1,s={}){return L({targets:t,duration:500,repeatRelay:1e3,repeat:-1,...s,scale:{value:{from:e,to:.9*e},ease:Phaser.Math.Easing.Back.In,yoyo:!0}})}static Idle(t,e,s,i={}){return L({duration:500,...i,targets:t,x:{value:`+=${e}`,repeat:-1,ease:Phaser.Math.Easing.Quadratic.InOut,yoyo:!0},y:{value:`+=${s}`,repeat:-1,ease:Phaser.Math.Easing.Quadratic.InOut,yoyo:!0}})}static Seesaw(t,e=1,s={}){return L({duration:500,repeat:-1,...s,targets:t,angle:{from:5*-e,to:5*e,ease:Phaser.Math.Easing.Quadratic.InOut,yoyo:!0}})}static Bob(t,e=1,s={}){return L({duration:100,repeat:-1,repeatDelay:500,...s,targets:t,y:"+="+30*e,scaleX:.85*e,scaleY:.75*e,yoyo:!0,ease:Phaser.Math.Easing.Quadratic.Out})}static Flip(t,e=1,s={}){return L({...s,targets:t,props:{scaleX:{value:1.1*-e,duration:750,yoyo:!0,ease:Phaser.Math.Easing.Back.InOut},scaleY:{value:1.2*e,duration:750,yoyo:!0}}})}static Hand(t,e=1,s={}){return D({repeat:-1,repeatDelay:700,...s,targets:t,tweens:[{targets:t,y:"+="+5*e,scaleX:.85*e,scaleY:.75*e,duration:100,ease:Phaser.Math.Easing.Quadratic.Out,repeat:1,repeatDelay:100,yoyo:!0}]})}static FadeIn(t,e={}){return L({alpha:1,duration:500,ease:Phaser.Math.Easing.Quadratic.Out,...e,targets:t})}static FadeOut(t,e={}){return L({alpha:0,duration:500,ease:Phaser.Math.Easing.Quadratic.In,...e,targets:t})}static FadeOutBy(t,e,s,i={}){return L({duration:500,...i,targets:t,x:`+=${e}`,y:`+=${s}`,alpha:0,ease:Phaser.Math.Easing.Quadratic.InOut})}static FadeOutScale(t,e={}){return L({alpha:0,scale:1.5,duration:500,ease:Phaser.Math.Easing.Cubic.InOut,...e,targets:t})}static FadeX(t,e=0,s=!1,i=500,a={}){const n={value:e,duration:.5*i,ease:Phaser.Math.Easing.Cubic.In},r={value:e,delay:.5*i,duration:.5*i,ease:Phaser.Math.Easing.Cubic.Out};return L({...a,targets:t,alphaTopLeft:s?r:n,alphaBottomLeft:s?r:n,alphaTopRight:s?n:r,alphaBottomRight:s?n:r})}static FadeY(t,e=0,s=!1,i=500,a={}){const n={value:e,duration:.5*i,ease:Phaser.Math.Easing.Cubic.In},r={value:e,delay:.5*i,duration:.5*i,ease:Phaser.Math.Easing.Cubic.Out};return L({...a,targets:t,alphaTopLeft:s?r:n,alphaTopRight:s?r:n,alphaBottomLeft:s?n:r,alphaBottomRight:s?n:r})}static FadeDiag(t,e=0,s=!1,i=!1,a=500,n={}){const r={value:e,duration:.25*a,ease:Phaser.Math.Easing.Quadratic.In},o={value:e,delay:.25*a,duration:.5*a},h={value:e,delay:.75*a,duration:.25*a,ease:Phaser.Math.Easing.Quadratic.Out},l=(t,e)=>t?h:e?o:r;return L({...n,targets:t,alphaTopLeft:l(i&&s,i||s),alphaBottomRight:l(!i&&!s,i||s),alphaBottomLeft:l(i&&!s,s||i),alphaTopRight:l(!i&&s,s||i)})}static FadeRadial(t,e=0,s="topLeft",i=!1,a=500,n={}){const r=["topLeft","topRight","bottomRight","bottomLeft"];return((t,e,s)=>{const i=t.indexOf(e);if(-1===i)throw new Error(`Element ${e} not found in array.`);const a=s?-1:1;return t.reduce(((e,s,n)=>[...e,t[(n-i+a+t.length)%t.length]]),[])})(r,s,i).forEach(((t,s)=>{return n[`alpha${Phaser.Utils.String.UppercaseFirst(t)}`]={value:e,duration:.25*a,delay:s*a*.25,ease:(i=s,o=r.length,0===i?Phaser.Math.Easing.Quadratic.In:i===o-1?Phaser.Math.Easing.Quadratic.Out:Phaser.Math.Easing.Linear)};var i,o})),L({...n,targets:t})}static FadeInAndOut(t,e=0,s=500,i={}){return D({...i,targets:t,tweens:[{targets:t,alpha:1,duration:.5*s,ease:Phaser.Math.Easing.Quadratic.Out},{targets:t,alpha:0,delay:e,duration:.5*s,ease:Phaser.Math.Easing.Quadratic.In}]})}static FadeLoop(t,e,s,i=500,a=750,n={}){return k(t,(t=>t.setPosition(t.x-e,t.y-s).setAlpha(0))),D({alpha:0,repeat:-1,...n,tweens:[{targets:t,alpha:1,x:"+="+e/2,y:"+="+s/2,delay:i,duration:a/2},{targets:t,alpha:0,x:"+="+e/2,y:"+="+s/2,duration:a/2,onComplete:()=>k(t,(t=>t.setPosition(t.x-e,t.y-s).setAlpha(0)))}],targets:t,ease:Phaser.Math.Easing.Quadratic.InOut})}static Popup(t,e=1,s=1e3,i={}){return k(t,(t=>t.setScale(0).setAlpha(0))),D({...i,targets:t,tweens:[{targets:t,scale:1,alpha:1,y:"-="+90*e,duration:.4*s,ease:Phaser.Math.Easing.Back.Out},{targets:t,alpha:0,y:"-="+90*e,delay:.2*s,duration:.4*s,ease:Phaser.Math.Easing.Quadratic.In}]})}static PopFrame(t,e,s,i={}){return L({scale:.9,duration:500,...i,targets:t,yoyo:!0,onYoyo:()=>{k(t,(t=>{t.setTexture(e),s&&t.setFrame(s)}))},ease:Phaser.Math.Easing.Back.In})}static SnapIn(t,e={}){return k(t,(t=>t.setAlpha(0).setScale(2))),L({duration:500,...e,targets:t,alpha:{value:1,ease:Phaser.Math.Easing.Quintic.In},scale:{value:1,ease:Phaser.Math.Easing.Quintic.In}})}static RubberIn(t,e={}){return L({duration:1e3,...e,targets:t,alpha:{from:0,to:1,ease:Phaser.Math.Easing.Elastic.Out},scale:{from:0,to:1,ease:Phaser.Math.Easing.Elastic.Out}})}static RotateIn(t,e=.5,s=.5,i=1,a={}){return k(t,(t=>t.setAlpha(0).setAngle(60*-i).setOrigin(e,s).setPosition(t.x-t.width*(.5-e),t.y-t.height*(.5-s)))),L({duration:500,...a,targets:t,angle:0,alpha:1,ease:Phaser.Math.Easing.Back.Out})}static RotateOut(t,e=.5,s=.5,i=1,a={}){return k(t,(t=>{var i;const a=t.x-t.displayWidth*(.5-e)||0,n=t.y-t.displayHeight*(.5-s)||0;null==(i=null==t?void 0:t.setOrigin(e,s))||i.setPosition(a,n)})),L({duration:500,...a,targets:t,angle:"+="+60*i,alpha:0,ease:Phaser.Math.Easing.Quadratic.In})}static Hinge(t,e=700,s=2e3,i={}){k(t,(t=>{var e;const s=t.x-.5*t.displayWidth||0,i=t.y-.5*t.displayHeight||0;null==(e=null==t?void 0:t.setOrigin(0))||e.setPosition(s,i)}));const a={targets:t,angle:80,ease:Phaser.Math.Easing.Quadratic.InOut,duration:.2*s},n={targets:t,angle:60,ease:Phaser.Math.Easing.Quadratic.InOut,duration:.2*s};return D({...i,targets:t,tweens:[a,n,a,n,{targets:t,y:`+=${e}`,alpha:0,angle:0,duration:.2*s}]})}static JackInTheBox(t,e=1,s=1e3,i={}){return k(t,(t=>t.setAlpha(0).setAngle(0).setScale(0))),D({...i,targets:t,tweens:[{targets:t,alpha:.7,angle:-30*e,scale:.8,duration:.5*s,ease:Phaser.Math.Easing.Quadratic.Out},{targets:t,alpha:1,angle:10*e,scale:1.1,duration:.25*s},{targets:t,angle:0,scale:1,duration:.25*s,ease:Phaser.Math.Easing.Back.Out}]})}static RollIn(t,e={}){return k(t,(t=>t.setPosition(t.x-t.displayWidth||0,t.y))),L({duration:500,...e,targets:t,alpha:{from:0,to:1},angle:{from:-120,to:0},ease:Phaser.Math.Easing.Circular.Out,onUpdate:t=>{t.targets.forEach((e=>{e.x+=(e.displayWidth||0)*t.getValue()}))}})}static RollOut(t,e={}){return L({duration:500,...e,targets:t,alpha:0,angle:120,ease:Phaser.Math.Easing.Circular.In,onUpdate:t=>{t.targets.forEach((e=>{e.x+=(e.displayWidth||0)*t.getValue()}))}})}}class Y extends Phaser.GameObjects.Container{}class $ extends Y{constructor(t,s,i,a,n=0){super(t,s,0),e(this,"_maxHeight"),e(this,"scrollY",0),e(this,"prevY",this.scrollY),e(this,"totalHeight",0),e(this,"breakpoint",new Phaser.Structs.List(this)),e(this,"inputEnabled",!1),e(this,"fab",null),this.scene=t,this.x=s,t.add.existing(this),this._maxHeight=n,this.setState(Phaser.Input.MOUSE_UP).setSize(i,a),t.scale.on(Phaser.Scale.Events.RESIZE,(()=>{this.scrollY=Phaser.Math.Clamp(this.scrollY,0,this.maxScrollY)}))}get maxHeight(){return this._maxHeight<=0&&(this._maxHeight=0,this.list.forEach((t=>this._maxHeight+=t.height))),this._maxHeight}set maxHeight(t){this._maxHeight=t}get maxScrollY(){return this.maxHeight-this.scene.scale.height}get currentIndex(){for(const[t,e]of this.breakpoint.list.entries())if(this.scrollY+this.maxScrollY>e)return t;return this.breakpoint.length}get isLast(){return this.scrollY-Math.min(0,this.height-this.scene.scale.height)>=this.breakpoint.last}get isBottom(){return this.scrollY===this.maxScrollY}add(t){const e=t=>{if(!(t instanceof M))throw new Error("Only Film is allowed");t.setPosition(-this.x,this.last?this.last.height+this.last.y:0),this.breakpoint.add(this.totalHeight),this.totalHeight+=t.height,super.add(t)};return Array.isArray(t)?t.forEach((t=>e(t))):e(t),this}addCustomClass(t,e,s=Math.max(this.length-1,0)*this.width){const i=new t(this.scene,this,e,s);return this.add(i),i}setFAB(t){return this.fab=t,this}preUpdate(t,e){var s,i,a;this.y=Math.round((s=this.y,i=-this.scrollY,s*(1-(a=.0075*e))+i*a)),this.list.forEach((t=>t.update()))}enableControl(){return this.inputEnabled=!0,this}disableControl(){return this.inputEnabled=!1,this}registerControl(t){this.inputEnabled=!0;const e=this.scene.input;return e.off(Phaser.Input.Events.POINTER_DOWN,this.onpointerdown,this).off(Phaser.Input.Events.POINTER_MOVE,this.onpointermove,this).off(Phaser.Input.Events.POINTER_UP,this.onpointerup,this),e.on(Phaser.Input.Events.POINTER_DOWN,this.onpointerdown,this).on(Phaser.Input.Events.POINTER_MOVE,this.onpointermove,this).on(Phaser.Input.Events.POINTER_UP,this.onpointerup,this),t&&(this.setFAB(t),t.registerControl()),this}onpointerdown(t){var e;this.inputEnabled&&!(null==(e=this.fab)?void 0:e.isDragging)&&(this.prevY=this.scrollY+t.y,this.setState(Phaser.Input.MOUSE_DOWN))}onpointermove(t){var e;this.inputEnabled&&!(null==(e=this.fab)?void 0:e.isDragging)&&this.state!==Phaser.Input.MOUSE_UP&&(this.scrollY=Phaser.Math.Clamp(Math.round(this.prevY-t.y),0,this.maxScrollY),this.setState(Phaser.Input.MOUSE_MOVE))}onpointerup(){this.inputEnabled&&(this.prevY=this.scrollY,this.setState(Phaser.Input.MOUSE_UP))}scrollToTop(){this.scrollY=0}scrollToBottom(){this.scrollY=this.maxScrollY}scrollNext(){for(const[t,e]of this.breakpoint.list.entries())if(this.scrollY<e)return void(this.scrollY=this.isBottom?0:Phaser.Math.Clamp(this.breakpoint.getAt(t),0,this.maxScrollY));this.scrollToTop()}}Phaser.GameObjects.Particles.Particle;Phaser.GameObjects.Container;class V extends v{constructor(t,s,i,a,n){super(t,s,i),e(this,"state",0),e(this,"facingDown",!0),e(this,"dom"),t.add.existing(this);const r=this.create(a,n);this.dom=t.add.dom(0,0,r).setOrigin(.5).setDepth(99),this.dom.pointerEvents="false",this.scene.tweens.add({targets:[this.dom],y:"-=10",duration:500,repeat:-1,ease:Phaser.Math.Easing.Quadratic.InOut,yoyo:!0}),this.add(this.dom)}create(t,e){const s=document.createElement("img");s.src=t,s.draggable=!1;const i=document.createElement("img");i.src=e,i.draggable=!1,s.style.display=this.facingDown?"block":"none",i.style.display=this.facingDown?"none":"block",this.on("down",(()=>{this.facingDown||(this.facingDown=!0,i.style.display="none",s.style.display="block")})),this.on("up",(()=>{this.facingDown&&(this.facingDown=!1,i.style.display="block",s.style.display="none")}));const a=document.createElement("div");return a.append(i,s),a}get isDragging(){return 1===this.state||2===this.state}get minX(){return this.width/2}get maxX(){return this.scene.scale.width-this.width/2}get minY(){return this.height/2}get maxY(){return this.scene.scale.height-this.height/2}setState(t){return this.state!==t&&(this.scene.tweens.killTweensOf(this),0===this.state&&this.scene.tweens.add({targets:[this],x:this.x>this.scene.scale.width/2?this.maxX:this.minX,y:this.y>this.scene.scale.height/2?this.maxY:this.minY,duration:500,ease:Phaser.Math.Easing.Quadratic.InOut})),super.setState(t)}preUpdate(){var t;null==(t=this.dom)||t.updateSize(),this.setElementInteractive(this.dom),this.x<this.minX?this.x=this.minX:this.x>this.maxX&&(this.x=this.maxX),this.y<this.minY?this.y=this.minY:this.y>this.maxY&&(this.y=this.maxY)}setElementInteractive(t){t&&t.width>0&&null==t.input&&this.setSize(this.dom.displayWidth,this.dom.displayHeight).setInteractive({draggable:!0})}registerControl(){return this.on(Phaser.Input.Events.POINTER_DOWN,((t,e,s,i)=>{var a;this.setState(1),null==(a=this.onpointerdown)||a.call(this,t,e,s,i)})).on(Phaser.Input.Events.DRAG,((t,e,s)=>{var i;this.setState(2),this.setPosition(e,s),null==(i=this.ondrag)||i.call(this,t,e,s)})).on(Phaser.Input.Events.POINTER_UP,((t,e,s,i)=>{var a;1===this.state&&(null==(a=this.onpointerup)||a.call(this,t,e,s,i)),this.setState(0),this.scene.tweens.killTweensOf(this),this.scene.tweens.add({targets:[this],x:this.x>this.scene.scale.width/2?this.maxX:this.minX,y:this.y>this.scene.scale.height/2?this.maxY:this.minY,duration:500,ease:Phaser.Math.Easing.Quadratic.InOut})}))}}class F extends M{create(){this.make.image(g,0,"bg").setOrigin(.5,0);const t=this.make.image(360,690,"atlas","logo"),e=this.make.image(105,893,"atlas","text-swipe-down").setScale(0),s=this.make.image(246,889,"atlas","hand").setScale(0);this.make.image(g,961,"atlas","divider"),G.FloatIn(t,0,-50),G.ZoomIn(e,{delay:250}),G.ZoomIdle(s,0,-10,1,{delay:250})}}class Q extends M{create(){this.make.image(g,0,"bg-2").setOrigin(.5,0),this.make.image(g,563,"atlas","divider");const t=this.make.image(g,120,"atlas","text-watch").setAlpha(0),e=this.make.video(g,310,651,278,"tvc.mp4").setBorderFrame("images/video-frame.png",5,"15px").setPlayButton("images/play.svg",(()=>r.send(o.VIDEO_PLAY))).setSoundButton("images/sound-on.svg","images/sound-off.svg",30,30,(t=>r.send(t?o.MUTE:o.UNMUTE))).setScale(0);r.trackVideoQuartiles(e.video),t.once("intersect",(()=>G.FloatIn(t,0,-20))),e.once("intersect",(()=>G.ZoomIn(e)))}}const W={x:[145,348,551],item:[{y:945,frame:"item-1"},{y:943,frame:"item-2"},{y:931,frame:"item-3"},{y:936,frame:"item-4"}]};class j extends M{constructor(...t){super(...t),e(this,"score",0),e(this,"bg"),e(this,"timepiece"),e(this,"counter"),e(this,"bar"),e(this,"robot"),e(this,"cable"),e(this,"hand"),e(this,"handTween"),e(this,"gosling"),e(this,"items",[]),e(this,"popupScore"),e(this,"overlay"),e(this,"timesUp"),e(this,"modalScore"),e(this,"textScore"),this.setState(0),this.make.image(g,1025,"atlas","divider"),this.bg=this.make.image(g,p,"game","bg"),this.sendToBack(this.bg);const s={fontFamily:"FontPrimary",fontSize:40,stroke:"#000",strokeThickness:8};this.timepiece=new I(this.scene,88,126,30,s),this.timepiece.setBackground(0,-18,"game","hud-time"),this.timepiece.on("complete",(()=>this.setState(3))),this.counter=new x(this.scene,587,126,0,s),this.counter.setBackground(0,-18,"game","hud-score"),this.bar=new _(this.scene,618,553,{key:"game",frame:"bar-fill",maxWidth:546,height:20}),this.bar.setBackground(0,0,"game","bar-bg").setAngle(-90),this.add([this.timepiece,this.counter,this.bar]),this.gosling=this.make.image(618,this.bar.slice.getBounds().top,"game","baby-gosling"),this.items=W.x.map(((t,e)=>{const{y:s,frame:i}=W.item[e],a=this.make.image(t,s,"game",i).setScale(0);return a.once("intersect",(()=>G.ZoomIn(a,{delay:100*e}))),a})),this.robot=this.make.image(346,545,"game","robot").setOrigin(.5,1).setAlpha(0),this.cable=this.make.nineslice(405,349,"game","robot-cable",25,0,10,10,1,1).setOrigin(.5,0),this.hand=this.make.image(this.cable.x,this.cable.y,"game","robot-hand").setOrigin(.73,.1).setAlpha(0),this.handTween=this.scene.add.tween({targets:this.cable,angle:{from:-20,to:30},duration:1e3,yoyo:!0,repeat:-1,onUpdate:t=>{var e;null==(e=this.hand)||e.setAngle(t.getValue()-15)},paused:!0}),this.robot.once("intersect",(()=>{G.FloatIn([this.robot,this.hand],0,-10)})),this.popupScore=new f(this.scene,"+100",{fontFamily:"FontPrimary",fontSize:60,stroke:"#000",strokeThickness:8}),this.overlay=this.make.graphics().fillStyle(0,.4).fillRect(-43,0,768,c).setAlpha(0),this.timesUp=this.make.image(g,p,"game","times-up").setScale(0),this.modalScore=this.make.container(g,547).setAlpha(0),this.textScore=new x(this.scene,0,0,this.score,{fontFamily:"FontPrimary",fontSize:50,color:"#fff"});const i=this.scene.add.image(0,0,"game","modal-score"),a=this.scene.add.image(0,106,"game","replay").setInteractive().on(Phaser.Input.Events.POINTER_DOWN,(()=>{4===this.state&&this.setState(1)}));this.modalScore.add([i,this.textScore,a]),G.Pulse(a)}create(){super.create();const t=this.make.image(398,444,"game","text-guide-1").setScale(0),e=this.make.image(g,655,"game","text-guide-2").setScale(0),s=this.make.image(g,838,"game","text-tap").setScale(0),i=this.make.image(491,529,"game","arrow-1").setScale(0),a=this.make.image(g,752,"game","hand").setScale(0);t.once("intersect",(()=>{this.bringToTop(t),this.bringToTop(i),G.ZoomIn(t)})),e.once("intersect",(()=>G.ZoomIn(e))),i.once("intersect",(()=>G.RotateIn(i,0,0,10,{scale:1}))),a.once("intersect",(()=>G.ZoomIn(a,{onComplete:()=>G.Hand(a)}))),s.once("intersect",(()=>G.ZoomPulse(s,1,{onComplete:()=>{this.bg.once(Phaser.Input.Events.POINTER_DOWN,(()=>{G.ZoomOut([t,e,s,i,a]),this.setState(1)}))}}))),this.once("intersect",(()=>this.createGame()))}createGame(){this.bg.setInteractive().on(Phaser.Input.Events.POINTER_DOWN,(()=>{var t;this.active&&2===this.state&&(null==(t=this.bg)||t.removeInteractive(),this.handTween.pause(),this.scene.add.tween({targets:this.cable,height:{from:0,to:560},duration:1e3,yoyo:!0,onUpdate:()=>{const t=this.cable.getBottomCenter();this.hand.setPosition(t.x,t.y)},onComplete:()=>{this.bg.setInteractive(),this.handTween.resume()}}))}))}setState(t){if(t===this.state)return this;switch(super.setState(t),t){case 1:this.score=0,this.bar.updateTo(0),this.counter.reset(0),this.timepiece.reset(),this.items.forEach((t=>{t.alpha&&(t.setActive(!0),G.ZoomIn(t))})),G.ZoomOut(this.modalScore,{onComplete:()=>this.setState(2)});break;case 2:this.textScore.updateTo(0),this.timepiece.resume(),this.handTween.resume();break;case 3:this.timepiece.pause(),this.handTween.pause(),G.FadeInAndOut(this.overlay,1e3,1e3),G.ZoomInAndOut(this.timesUp,1e3,1e3),this.scene.time.delayedCall(2e3,(()=>this.setState(4)));break;case 4:this.timepiece.pause(),this.textScore.updateTo(this.score,this.score),this.modalScore.setScale(1),G.FloatIn(this.modalScore,0,-50)}return this}update(){super.update();const t=this.bar.slice.getBounds();if(this.gosling.setY(t.y-this.filmstrip.y-this.y),2===this.state)1===this.bar.progress&&this.setState(4),this.items.forEach((t=>{if(!t.active)return;const e=t.getBounds();e.x+=.2*e.width,e.y+=.2*e.height,e.width*=.6,e.height*=.6;const s=this.hand.getBounds();s.x+=.2*s.width,s.y+=.2*s.height,s.width*=.6,s.height*=.6,Phaser.Geom.Intersects.RectangleToRectangle(e,s)&&("item-1"===t.frame.name&&(this.add(this.popupScore.spawn(t.x+50,t.y-50)),this.addScore()),G.ZoomOut(this.items,{hold:Phaser.Math.Between(250,500),onComplete:()=>{let t=!1;Phaser.Utils.Array.Shuffle(this.items).forEach(((e,s)=>{if(e.setX(W.x[s]).setActive(!0),"item-1"!==e.frame.name||t){const{y:t,frame:s}=Phaser.Utils.Array.GetRandom(W.item);e.setY(t).setFrame(s)}else t=!0})),G.ZoomIn(this.items)}}))}))}addScore(){this.items.forEach((t=>t.setActive(!1))),this.score+=100,this.bar.updateTo(this.score,500),this.counter.updateTo(this.score,this.score)}}class H extends M{create(){this.make.image(g,p,"atlas","bg");const t=this.make.image(g,86,"atlas","text-download").setAlpha(0),e=this.make.image(g,955,"atlas","cta").setScale(0).setInteractive().on(Phaser.Input.Events.POINTER_UP,(()=>r.click(o.CTA)));t.once("intersect",(()=>G.FloatIn(t,0,-50))),this.once("intersect",(()=>G.ZoomPulse(e)));const s=Array.from({length:3},((t,e)=>this.make.image(g,524,"atlas",`slide-${e+1}`).setAlpha(0===e?1:0))),i=this.make.image(39,479,"atlas","arrow-left"),a=this.make.image(642,479,"atlas","arrow-right"),n=Array.from({length:3},((t,e)=>this.make.image(317+24*e,773,"atlas","dot").setAlpha(0===e?1:.4)));G.Idle(i,10,0),G.Idle(a,-10,0);const[h]=T(i,a,3,((t,e)=>{G.FadeOut(n[t],{duration:250,alpha:.4}),G.FadeOut(s[t],{duration:250}),G.FadeIn([s[e],n[e]],{duration:250})})),l=this.make.image(197,819,"atlas","download-ios"),d=this.make.image(486,819,"atlas","download-android");l.setInteractive().on(Phaser.Input.Events.POINTER_UP,(async()=>{A(`images/ios/img${h()+1}.jpg`,`img${h()+1}.jpg`),r.send(o.DOWNLOAD_IOS)})),d.setInteractive().on(Phaser.Input.Events.POINTER_UP,(()=>{A(`images/android/img${h()+1}.jpg`,`img${h()+1}.jpg`),r.send(o.DOWNLOAD_ANDROID)}))}}const z="sound-off",X="sound-on";const Z=new class extends y{constructor(){super({key:m.UI}),e(this,"_muted",!0),e(this,"audio",new R),e(this,"video"),e(this,"fab"),e(this,"filmstrip")}get muted(){return this._muted}set muted(t){var e;this._muted=t,this.audio.muted=t,null==(e=this.video)||e.setMute(t)}init(){super.boot()}preload(){this.audio.setMute(this.muted)}create(){this.filmstrip=new $(this,g,u,c),this.fab=new V(this,652,-200,"images/fab-down.png","images/fab-up.png"),this.filmstrip.registerControl(this.fab),this.filmstrip.addCustomClass(F,962),this.filmstrip.addCustomClass(Q,566),this.filmstrip.addCustomClass(j,1026),this.filmstrip.addCustomClass(H,1024),this.fab.onpointerup=()=>{var t;r.send(o.START,"once"),r.exists(o.COMPLETE)&&r.send(o.REPLAY,"once"),this.filmstrip&&(null==(t=this.filmstrip)||t.scrollNext())},G.MoveTo(this.fab,this.fab.x,905,{alpha:1,delay:1e3,duration:2e3})}update(){var t,e,s,i;null==(t=this.video)||t.update(),(null==(e=this.filmstrip)?void 0:e.isLast)?null==(s=this.fab)||s.emit("up"):null==(i=this.fab)||i.emit("down")}createVideo(){this.video=new P(this,g,485,656,376,"tvc.mp4"),this.video.setAlpha(0).setMute(this.muted).setBorderFrame("images/video-frame.png",5).setPlayButton("images/play.svg",(()=>r.send(o.VIDEO_PLAY,"first"))).setSoundButton(`images/${X}.svg`,`images/${z}.svg`,35,35,(t=>{this.muted=t,r.send(this.muted?o.VIDEO_MUTE:o.VIDEO_UNMUTE,"first")})),r.trackVideoQuartiles(this.video.video)}createSoundButton(t=this,e=632,s=50){const i=t.add.image(e,s,this.muted?z:X).setDepth(99).setInteractive().on(Phaser.Input.Events.POINTER_DOWN,(()=>{this.muted=!this.muted,null==i||i.setTexture(this.muted?z:X),r.send(this.muted?o.MUTE:o.UNMUTE,"first")}));return i}loadVideo(){var t;return null==(t=this.video)||t.load(!0),this}showVideo(){return this.video&&G.FadeIn(this.video,{duration:250,onComplete:()=>{var t;null==(t=this.video)||t.replay().setMute(this.muted)}}),this}hideVideo(){return this.video&&(G.FadeOut(this.video,{duration:250}),this.video.pause()),this}},q={width:u,height:c,type:Phaser.AUTO,scene:[class extends y{constructor(){super({key:m.BOOT})}init(){super.boot()}preload(){this.load.image("bg","bg.jpg"),this.load.image("bg-2")}create(){this.scene.start(m.PRELOADER)}},class extends y{constructor(){super({key:m.PRELOADER}),e(this,"loadingBar")}init(){super.boot()}preload(){this.add.image(g,0,"bg").setOrigin(.5,0),this.add.image(g,962,"bg-2").setOrigin(.5,0),this.load.atlas("atlas"),this.load.atlas("game"),this.load.svg("sound-on"),this.load.svg("sound-off"),this.loadingBar=new O(this,g,p),this.loadingBar.setColor(g,50,5,5,13549591,16777215),this.load.on(Phaser.Loader.Events.PROGRESS,(t=>{var e;return null==(e=this.loadingBar)?void 0:e.updateTo(t)}))}create(){G.FadeOut(this.loadingBar,{onComplete:this.next,callbackScope:this})}next(){this.scene.start(m.UI)}},Z],autoFocus:!0,input:{activePointers:1},banner:{hidePhaser:!0},dom:{createContainer:!0,behindCanvas:!1,pointerEvents:"none"},loader:{path:"images",maxParallelDownloads:1,async:!0},scale:{mode:Phaser.Scale.FIT,autoRound:!0,autoCenter:Phaser.Scale.CENTER_BOTH,parent:"game-container"},expandParent:!0,audio:{noAudio:!0},transparent:!0,batchSize:512},J=Object.freeze(Object.defineProperty({__proto__:null,config:q,createGame:()=>new Phaser.Game(q)},Symbol.toStringTag,{value:"Module"}));export{l as c,d as g};
